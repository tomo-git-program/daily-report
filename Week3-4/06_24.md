# 日報(2023/6/24)

## 本日の目標（TODO 目標/できるようになりたいこと）

- 

## 学習時間（Hour）
- 6.0時間

## 目標振り返り（TODO 進捗/できるようになりたいこと振り返り）
- NATでDBサーバーからインターネット接続する途中まで

## 詰まっていること（実現したいこと/現状/行ったこと/仮説）

- なし


## 学んだこと（新しい気付き、学び）

「踏み台サーバーを経由してDBサーバーにSSHで接続する」
【やりかた】
①WebサーバーにSSｈでログインする
②WebサーバーからSSHでDBサーバーにログインする
というようなWebサーバーを踏み台にDBサーバーにアクセスするという方法を取っていきます

「秘密鍵をアップロードする」
インスタンスにSSHでログインするには秘密鍵が必要
WebサーバーからDBサーバーへログインするにはWebサーバーに秘密鍵を置いておく必要があります。
TeraTermでは「ファイル」→「SSＨ SCP」でをクリックするとファイルを転送できる
今回は秘密鍵をec2-userのホームディレクトリに転送する（「~/」）
この「SSH SCP」の画面の上部が「相手サーバーへのファイルの転送」
下部が「サーバー側からのファイルの受信」ができる（今回は上部しか使わない）

「鍵ファイルのパーミッションを変更する」
以下のコマンドを実行
「chmod 400 my-key.pem」

これは秘密鍵を見られると誰もがサーバーにアクセスできてしまうことを防ぐことが狙いです。
また『自分だけが読み取れる』というパーミッションになっていないと「踏み台サーバーからDB

サーバーへのアクセス』は出来ないようになっています（エラーで）

※コマンドの解説
chmod…ファイルに対してのアクセス権を変更
400…
　4…所有者に読み取り権限を付与
　0…グループに対して読み取り権限を削除
　0…そのほかのユーザーに対して読み取り権限を削除

「Webサーバーを踏み台にしてDBサーバーにSSH接続する」
コマンドを実行
「ssh -i my-key-second.pem ec2-user@10.0.2.10」
※コマンドの解説
SSH接続で 秘密鍵を使い DBサーバーに割り当てたIPアドレス10.0.2.10に
ログインする
ログインに成功するとAmaonLinuxのロゴが表示され
「[ec2-user@ip-10-0-2-10 ~]」へとユーザーが切り替わる。
exitでDBサーバーからはログアウトできる

## 感想（一日の感想、雑談）
- 明日までにはadvanced以外の課題を終わらせ提出改題に取り掛かりたい。
## 明日の目標（TODO 目標/できるようになりたいこと）

- 提出課題まで